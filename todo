#!/bin/bash
FILE="~/.todo"

usage() {
	cat << EOF
Usage: $(basename $0) [-shn] [-a todo] [-d <line-nr>]
EOF
	exit 0
}

add() {
	printf "%s\n" "$1" >> "$FILE"
	printf "todo added\n"
	exit 0
}

delete() {
	test -n "$1" || exit 1
	printf "todo '%s' deleted.\n" "`sed $1q $FILE`"
	sed -i "$1d" $FILE
	exit 0
}

number() {
	cat "$FILE" | wc -l && exit 0
}

show() {
	cat << EOF

       ██                 ██         
      ░██                ░██         
     ██████  ██████      ░██  ██████ 
    ░░░██░  ██░░░░██  ██████ ██░░░░██
      ░██  ░██   ░██ ██░░░██░██   ░██
      ░██  ░██   ░██░██  ░██░██   ░██
      ░░██ ░░██████ ░░██████░░██████ 
       ░░   ░░░░░░   ░░░░░░  ░░░░░░  
    
     ████████████████████████████████
    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░ 

`test -f "${FILE}" && nl -s ": " $FILE`

EOF
	exit 0
}

main() {
	while getopts "nsha:d:" opt; do
		case "$opt" in
			"n")	number ;;
			"s")	show ;;
			"h")	usage ;;
			"a")	add "$OPTARG" ;;
			"d")	delete "$OPTARG" ;;
			"?")	usage ;;
		esac
	done
	show
}

main "$@"

#!/bin/bash

MONWIDTH=$(wattr w `lsw -r`)

newmails() {
	ls $MAIL/new | wc -l
}

batstat() {
	test $(bat -s) = "Charging" && echo '+' || echo ' '
}

# left bar
while :; do
	printf "%s%4s %3d%s %-2d\n" "%{c}" "$(vol)" "$(bat)" "$(batstat)" "$(newmails)"
	sleep 1s
done |\

mybar 10 "bar" &

# right bar
while :; do
	printf "%s`python -c "import datetime; date = datetime.datetime.now() + datetime.timedelta(minutes=3); print(date.strftime('%d.%m  %H:%M'))"`\n" "%{c}"
	sleep 10s
done |\

mybar $(( MONWIDTH - MONWIDTH / 15 - 10)) "bar" &
